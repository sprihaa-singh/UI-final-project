{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
  {# Use lesson_id for consistency, it represents the radical's ID #}
  <h2 class="mb-4">Learn Radical: {{ lesson.radical }} (Part 2/2)</h2>

  <div class="mt-3">
    <h4>Stroke Order:</h4>
    {# Ensure the path is correct based on your static folder structure #}
    <img id="stroke-animation" src="{{ url_for('static', filename='strokes/' + lesson.radical + '.gif') }}" alt="Stroke order animation for {{ lesson.radical }}" width="200">
  </div>

  <p class="mt-4">Trace the radical on top of the emoji below.</p>

  <div class="tracing-container mt-2" style="position: relative; width: 200px; height: 200px;">
    <div id="emoji-background" style="font-size: 160px; opacity: 0.2; position: absolute; top: 0; left: 0; width: 100%; height:100%; text-align: center; line-height: 200px; {% if lesson_id == 1 %}transform: rotate(90deg);{% endif %}">
      {{ lesson.emoji }}
    </div>
    <canvas id="tracing-canvas" width="200" height="200" style="border: 1px solid #ccc; position: relative; z-index: 10;"></canvas>
  </div>

  <div class="mt-4">
      {# Pass both lesson_id and part for the AJAX call #}
      <button class="btn btn-primary" id="next-button" data-lesson-id="{{ lesson_id }}" data-part="1">Next</button>
  </div>
</div>
{# Ensure necessary JS is included via base.html or add specific script links if needed #}
{% endblock %}
